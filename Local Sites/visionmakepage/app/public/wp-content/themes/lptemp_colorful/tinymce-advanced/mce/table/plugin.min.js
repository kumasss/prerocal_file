(function(U,L){function V(r,C){for(var t,a=[],v=0;v<r.length;++v){if(!(t=Q[r[v]]))a:{t=U;for(var x=r[v].split(/[.\/]/),l=0;l<x.length;++l){if(!t[x[l]]){t=void 0;break a}t=t[x[l]]}}if(!t)throw"module definition dependecy not found: "+r[v];a.push(t)}C.apply(null,a)}function K(r,C,t){if("string"!==typeof r)throw"invalid module definition, module id must be defined and be a string";if(C===L)throw"invalid module definition, dependencies must be specified";if(t===L)throw"invalid module definition, definition function must be specified";
V(C,function(){Q[r]=t.apply(null,arguments)})}var Q={};K("tinymce/tableplugin/Utils",["tinymce/Env"],function(r){return{getSpanVal:function(r,t){return parseInt(r.getAttribute(t)||1,10)},paddCell:function(C){r.ie&&!(9<r.ie)||C.hasChildNodes()||(C.innerHTML='<br data-mce-bogus="1" />')}}});K("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils"],function(r,C,t){var a=r.each,v=t.getSpanVal;return function(x,l,e){function A(){x.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}
function w(a,c){if(!a)return[];c=r.map(c.split(","),function(a){return a.toLowerCase()});return r.grep(a.childNodes,function(a){return-1!==r.inArray(c,a.nodeName.toLowerCase())})}function b(){var I=0;p=[];D=0;a(["thead","tbody","tfoot"],function(c){var b=w(l,c)[0],b=w(b,"tr");a(b,function(b,k){k+=I;a(w(b,"td,th"),function(a,I){var b,f,d,n;if(p[k])for(;p[k][I];)I++;d=v(a,"rowspan");n=v(a,"colspan");for(f=k;f<k+d;f++)for(p[f]||(p[f]=[]),b=I;b<I+n;b++)p[f][b]={part:c,real:f==k&&b==I,elm:a,rowspan:d,
colspan:n};D=Math.max(D,I+1)})});I+=b.length})}function B(a){x.fire("newrow",{node:a});return a}function u(a){x.fire("newcell",{node:a});return a}function E(a,c){a=a.cloneNode(c);a.removeAttribute("id");return a}function q(a,c){var b;if(b=p[c])return b[a]}function k(a,c,b){a&&(b=parseInt(b,10),1===b?a.removeAttribute(c,1):a.setAttribute(c,b,1))}function h(a){return a&&(!!y.getAttrib(a.elm,"data-mce-selected")||a==e)}function m(){var c=[];a(l.rows,function(b){a(b.cells,function(a){if(y.getAttrib(a,
"data-mce-selected")||e&&a==e.elm)return c.push(b),!1})});return c}function g(c){var b,p={};!1!==x.settings.table_clone_elements&&(p=r.makeMap((x.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/));r.walk(c,function(k){var f;if(3==k.nodeType)return a(y.getParents(k.parentNode,null,c).reverse(),function(a){p[a.nodeName]&&(a=E(a,!1),b?f&&f.appendChild(a):b=f=a,f=a)}),f&&(f.innerHTML=C.ie&&10>C.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");
c=E(c,!1);u(c);k(c,"rowSpan",1);k(c,"colSpan",1);b?c.appendChild(b):t.paddCell(c);return c}function d(){var c=y.createRng();a(y.select("tr",l),function(a){0===a.cells.length&&y.remove(a)});if(0===y.select("tr",l).length)c.setStartBefore(l),c.setEndBefore(l),J.setRng(c),y.remove(l);else if(a(y.select("thead,tbody,tfoot",l),function(a){0===a.rows.length&&y.remove(a)}),b(),z&&(c=p[Math.min(p.length-1,z.y)]))J.select(c[Math.min(c.length-1,z.x)].elm,!0),J.collapse(!0)}function S(a,c,b,f){var k,d,n,e,h;
k=p[c][a].elm.parentNode;for(n=1;n<=b;n++)if(k=y.getNext(k,"tr")){for(d=a;0<=d;d--)if(h=p[c+n][d].elm,h.parentNode==k){for(e=1;e<=f;e++)y.insertAfter(g(h),h);break}if(-1==d)for(e=1;e<=f;e++)k.insertBefore(g(k.cells[0]),k.cells[0])}}function f(){a(p,function(c,b){a(c,function(a,c){var f,p,d;if(h(a)&&(a=a.elm,f=v(a,"colspan"),p=v(a,"rowspan"),1<f||1<p)){k(a,"rowSpan",1);k(a,"colSpan",1);for(d=0;d<f-1;d++)y.insertAfter(g(a),a);S(c,b,p-1,f)}})})}function F(c){var b=[];a(c,function(c){a(c,function(a){b.push(a)})});
return b}function n(c){var b;a(p,function(f,p){a(f,function(a,f){if(a.elm==c)return b={x:f,y:p},!1});return!b});return b}function c(){var c,b;c=b=0;a(p,function(f,k){a(f,function(a,f){var d,n;h(a)&&(a=p[k][f],f>c&&(c=f),k>b&&(b=k),a.real&&(d=a.colspan-1,n=a.rowspan-1,d&&f+d>c&&(c=f+d),n&&k+n>b&&(b=k+n)))})});return{x:c,y:b}}var p,D,z,G,J=x.selection,y=J.dom;l=l||y.getParent(J.getStart(!0),"table");b();if(e=e||y.getParent(J.getStart(!0),"th,td"))z=n(e),G=c(),e=q(z.x,z.y);r.extend(this,{deleteTable:function(){var a=
y.createRng();l!==x.getBody()&&(a.setStartAfter(l),a.setEndAfter(l),J.setRng(a),y.remove(l))},split:f,merge:function(c,e,g){var m,D,E,u,l,B,F;c?(m=n(c),D=m.x,E=m.y,m=D+(e-1),u=E+(g-1)):(z=G=null,a(p,function(c,b){a(c,function(a,c){h(a)&&(z||(z={x:c,y:b}),G={x:c,y:b})})}),z&&(D=z.x,E=z.y,m=G.x,u=G.y));l=q(D,E);c=q(m,u);if(l&&c&&l.part==c.part){f();b();l=q(D,E).elm;k(l,"colSpan",m-D+1);k(l,"rowSpan",u-E+1);for(g=E;g<=u;g++)for(e=D;e<=m;e++)p[g]&&p[g][e]&&(c=p[g][e].elm,c!=l&&(B=r.grep(c.childNodes),
a(B,function(a){l.appendChild(a)}),B.length&&(B=r.grep(l.childNodes),F=0,a(B,function(a){"BR"==a.nodeName&&F++<B.length-1&&l.removeChild(a)})),y.remove(c)));d()}},insertRow:function(c){var b,f,d,n,e,m,D,z;a(p,function(f,k){a(f,function(a){if(h(a)&&(a=a.elm,e=a.parentNode,m=B(E(e,!1)),b=k,c))return!1});if(c)return!b});if(b!==L){for(n=0;n<p[0].length;n++)if(p[b][n]&&(f=p[b][n].elm,f!=d)){if(!c){if(z=v(f,"rowspan"),1<z){k(f,"rowSpan",z+1);continue}}else if(0<b&&p[b-1][n]&&(D=p[b-1][n].elm,z=v(D,"rowSpan"),
1<z)){k(D,"rowSpan",z+1);continue}d=g(f);k(d,"colSpan",f.colSpan);m.appendChild(d);d=f}m.hasChildNodes()&&(c?e.parentNode.insertBefore(m,e):y.insertAfter(m,e))}},insertCol:function(c){var b,f;a(p,function(f){a(f,function(a,f){if(h(a)&&(b=f,c))return!1});if(c)return!b});a(p,function(a,p){var d,n,e;a[b]&&(d=a[b].elm,d!=f&&(e=v(d,"colspan"),n=v(d,"rowspan"),1==e?(c?d.parentNode.insertBefore(g(d),d):y.insertAfter(g(d),d),S(b,p,n-1,e)):k(d,"colSpan",d.colSpan+1),f=d))})},deleteCols:function(){var c=[];
if(l!==x.getBody()||1!=p[0].length&&r.grep(F(p),h).length!=F(p).length)a(p,function(b){a(b,function(b,f){h(b)&&-1===r.inArray(c,f)&&(a(p,function(a){a=a[f].elm;var c;c=v(a,"colSpan");1<c?k(a,"colSpan",c-1):y.remove(a)}),c.push(f))})}),d()},deleteRows:function(){function c(b){var f,d;a(b.cells,function(a){var c=v(a,"rowSpan");1<c&&(k(a,"rowSpan",c-1),f=n(a),S(f.x,f.y,1,1))});f=n(b.cells[0]);a(p[f.y],function(a){var c;a=a.elm;a!=d&&(c=v(a,"rowSpan"),1>=c?y.remove(a):k(a,"rowSpan",c-1),d=a)})}var b;
b=m();if(l!==x.getBody()||b.length!=l.rows.length)a(b.reverse(),function(a){c(a)}),d()},cutRows:function(){var a=m();if(l!==x.getBody()||a.length!=l.rows.length)return y.remove(a),d(),a},copyRows:function(){var c=m();a(c,function(a,b){c[b]=E(a,!0)});return c},pasteRows:function(c,b){var f=m(),d=f[b?0:f.length-1],n=d.cells.length;c&&(a(p,function(c){var b;n=0;a(c,function(a){a.real&&(n+=a.colspan);a.elm.parentNode==d&&(b=1)});if(b)return!1}),b||c.reverse(),a(c,function(a){var c,f=a.cells.length,p;
B(a);for(c=0;c<f;c++)p=a.cells[c],u(p),k(p,"colSpan",1),k(p,"rowSpan",1);for(c=f;c<n;c++)a.appendChild(u(g(a.cells[f-1])));for(c=n;c<f;c++)y.remove(a.cells[c]);b?d.parentNode.insertBefore(a,d):y.insertAfter(a,d)}),A())},getPos:n,setStartCell:function(a){z=n(a)},setEndCell:function(a){var c,b,f,d,k,e,m,h,g;G=n(a);if(z&&G){c=Math.min(z.x,G.x);b=Math.min(z.y,G.y);f=Math.max(z.x,G.x);d=Math.max(z.y,G.y);k=f;e=d;for(g=b;g<=e;g++)a=p[g][c],a.real||c-(a.colspan-1)<c&&(c-=a.colspan-1);for(h=c;h<=k;h++)a=
p[b][h],a.real||b-(a.rowspan-1)<b&&(b-=a.rowspan-1);for(g=b;g<=d;g++)for(h=c;h<=f;h++)a=p[g][h],a.real&&(m=a.colspan-1,a=a.rowspan-1,m&&h+m>k&&(k=h+m),a&&g+a>e&&(e=g+a));A();for(g=b;g<=e;g++)for(h=c;h<=k;h++)p[g][h]&&y.setAttrib(p[g][h].elm,"data-mce-selected","1")}},moveRelIdx:function(a,c){var b,f;b=n(a);b=b.y*D+b.x;do{b+=c;f=q(b%D,Math.floor(b/D));if(!f)break;if(f.elm!=a)return J.select(f.elm,!0),y.isEmpty(f.elm)&&J.collapse(!0),!0}while(f.elm==a);return!1},refresh:b})}});K("tinymce/tableplugin/Quirks",
["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(r,C,t,a,v){var x=a.each,l=v.getSpanVal;return function(e){function A(){function a(b){function q(a,d){var n=a?"previousSibling":"nextSibling",c=e.dom.getParent(d,"tr"),p=c[n];if(p)return g(e,d,p,a),b.preventDefault(),!0;var p=e.dom.getParent(c,"table"),h=c.parentNode,m=h.nodeName.toLowerCase();if("tbody"===m||m===(a?"tfoot":"thead")){var m=e.dom.select(">tbody",p),u=m.indexOf(h);a&&0===
u||!a&&u===m.length-1?(h=e.dom.select(">"+(a?"thead":"tfoot"),p),h=0!==h.length?h[0]:null):-1===u?(h="thead"===h.tagName.toLowerCase()?0:m.length-1,h=m[h]):h=m[u+(a?-1:1)];if(null!==h)return(c=k(h,a))&&g(e,d,c,a),b.preventDefault(),!0}(n=p[n])?(e.selection.setCursorLocation(n,0),c=!0):(n=e.dom.getParent(p,"td,th"))?c=q(a,n,b):(c=k(c,!a),e.selection.setCursorLocation(c,0),b.preventDefault(),c=!1);return c}function k(a,b){var d=a&&a[b?"lastChild":"firstChild"];return d&&"BR"===d.nodeName?e.dom.getParent(d,
"td,th"):d}function h(a){var b=a.selection.getNode();return null!==a.dom.getParent(b,"tr")}function m(a,b){var d=0,c=0;x(a.children,function(a,f){d+=l(a,"colspan");c=f;if(d>b)return!1});return c}function g(a,b,d,c){a=0;for(b=e.dom.getParent(b,"td,th");b.previousSibling;)b=b.previousSibling,a+=l(b,"colspan");b=m(d,a);d=d.childNodes[b];c=k(d,c);e.selection.setCursorLocation(c||d,0)}var d=b.keyCode;if((d==r.UP||d==r.DOWN)&&h(e)){var u=e.selection.getNode();C.setEditorTimeout(e,function(){var a=e.selection.getNode(),
a=e.dom.getParent(a,"td,th"),k=e.dom.getParent(u,"td,th"),h;if(h=a&&a!==k)h=e.dom.getParent(a,"TABLE")===e.dom.getParent(k,"TABLE");h&&q(!b.shiftKey&&d===r.UP,u,b)},0)}}e.on("KeyDown",function(b){a(b)})}function w(){e.on("KeyDown",function(a){var b,q,k=e.dom;if(37==a.keyCode||38==a.keyCode)if(b=e.selection.getRng(),(q=k.getParent(b.startContainer,"table"))&&e.getBody().firstChild==q){var h=b,m=q.ownerDocument;b=m.createRange();b.setStartBefore(q);b.setEnd(h.endContainer,h.endOffset);h=m.createElement("body");
h.appendChild(b.cloneContents());0===h.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(b=k.createRng(),b.setStartBefore(q),b.setEndBefore(q),e.selection.setRng(b),a.preventDefault())}})}function b(){e.on("KeyDown SetContent VisualAid",function(){var a;for(a=e.getBody().lastChild;a;a=a.previousSibling)if(3==a.nodeType){if(0<a.nodeValue.length)break}else if(1==a.nodeType&&("BR"==a.tagName||!a.getAttribute("data-mce-bogus")))break;a&&"TABLE"==a.nodeName&&
(e.settings.forced_root_block?e.dom.add(e.getBody(),e.settings.forced_root_block,e.settings.forced_root_block_attrs,t.ie&&10>t.ie?"&nbsp;":'<br data-mce-bogus="1" />'):e.dom.add(e.getBody(),"br",{"data-mce-bogus":"1"}))});e.on("PreProcess",function(a){(a=a.node.lastChild)&&("BR"==a.nodeName||1==a.childNodes.length&&("BR"==a.firstChild.nodeName||"\u00a0"==a.firstChild.nodeValue))&&a.previousSibling&&"TABLE"==a.previousSibling.nodeName&&e.dom.remove(a)})}function B(){function a(){var b=e.selection.getRng(),
q=e.selection.getNode(),k=e.dom.getParent(b.startContainer,"TD,TH"),h=k,m=e.dom.getParent(b.startContainer,"TABLE"),g;m&&(g=m.parentNode);m=3==b.startContainer.nodeType&&0===b.startOffset&&0===b.endOffset&&h&&("TR"==q.nodeName||q==g);h=("TD"==q.nodeName||"TH"==q.nodeName)&&!h;if(m||h){k||(k=q);for(q=k.lastChild;q.lastChild;)q=q.lastChild;3==q.nodeType&&(b.setEnd(q,q.data.length),e.selection.setRng(b))}}e.on("KeyDown",function(){a()});e.on("MouseDown",function(b){2!=b.button&&a()})}(function(){function b(a){e.$(a).empty();
v.paddCell(a)}e.on("keydown",function(l){if((l.keyCode==r.DELETE||l.keyCode==r.BACKSPACE)&&!l.isDefaultPrevented()){var q,k,h;if(q=e.dom.getParent(e.selection.getStart(),"table"))k=e.dom.select("td,th",q),h=a.grep(k,function(a){return!!e.dom.getAttrib(a,"data-mce-selected")}),0===h.length?(q=e.dom.getParent(e.selection.getStart(),"td,th"),e.selection.isCollapsed()&&q&&e.dom.isEmpty(q)&&(l.preventDefault(),b(q),e.selection.select(q,!0),e.selection.collapse(!0))):(l.preventDefault(),e.undoManager.transact(function(){k.length==
h.length?e.execCommand("mceTableDelete"):(a.each(h,b),e.selection.select(h[0],!0),e.selection.collapse(!0))}))}})})();t.webkit&&(A(),B());t.gecko&&(w(),b());9<t.ie&&(w(),b())}});K("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(r,C,t){return function(a){function v(b){a.getBody().style.webkitUserSelect="";if(b||B)a.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),B=!1}function x(t){var q=t.target;
if(!u&&q!==b&&(b=q,w&&A&&(q=l.getParent(q,"td,th"),w&&q&&w===l.getParent(q,"table")||(q=l.getParent(w,"td,th")),(A!==q||B)&&w&&q&&w===l.getParent(q,"table")))){t.preventDefault();e||(e=new r(a,w,A),a.getBody().style.webkitUserSelect="none");e.setEndCell(q);B=!0;t=a.selection.getSel();try{t.removeAllRanges?t.removeAllRanges():t.empty()}catch(k){}}}var l=a.dom,e,A,w,b,B=!0,u;a.on("SelectionChange",function(a){B&&a.stopImmediatePropagation()},!0);a.on("MouseDown",function(a){2==a.button||u||(v(),A=l.getParent(a.target,
"td,th"),w=l.getParent(A,"table"))});a.on("mouseover",x);a.on("remove",function(){l.unbind(a.getDoc(),"mouseover",x);v()});a.on("MouseUp",function(){function r(a,b){var f=new C(a,a);do{if(3==a.nodeType&&0!==t.trim(a.nodeValue).length){b?q.setStart(a,0):q.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){b?q.setStartBefore(a):q.setEndBefore(a);break}}while(a=b?f.next():f.prev())}var q,k=a.selection,h,m,g;if(A){e&&(a.getBody().style.webkitUserSelect="");h=l.select("td[data-mce-selected],th[data-mce-selected]");
if(0<h.length){q=l.createRng();m=h[0];q.setStartBefore(m);q.setEndAfter(m);r(m,1);h=new C(m,l.getParent(h[0],"table"));do if("TD"==m.nodeName||"TH"==m.nodeName){if(!l.getAttrib(m,"data-mce-selected"))break;g=m}while(m=h.next());r(g);k.setRng(q)}a.nodeChanged();A=e=w=b=null}});a.on("KeyUp Drop SetContent",function(a){v("setcontent"==a.type);A=e=w=b=null;u=!1});a.on("ObjectResizeStart ObjectResized",function(a){u="objectresized"!=a.type});return{clear:v}}});K("tinymce/tableplugin/Dialogs",["tinymce/util/Tools",
"tinymce/Env"],function(r,C){var t=r.each;return function(a){function v(){var b=a.settings.color_picker_callback;if(b)return function(){var h=this;b.call(a,function(a){h.value(a).fire("change")},h.value())}}function x(a){return{title:"Advanced",type:"form",defaults:{onchange:function(){B(a,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",
type:"colorbox",name:"borderColor",onaction:v()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:v()},{label:"\u80cc\u666f\u753b\u50cf",name:"backgroundImage",type:"textbox",size:20}]}]}}function l(a){return a?a.replace(/px$/,""):""}function e(a){/^[0-9]+$/.test(a)&&(a+="px");return a}function A(b){t(["left","center","right"],function(h){a.formatter.remove("align"+h,{},b)})}function w(b){t(["top","middle","bottom"],function(h){a.formatter.remove("valign"+h,{},b)})}function b(a,
b,e){function g(a,e){e=e||[];r.each(a,function(a){var d={text:a.text||a.title};a.menu?d.menu=g(a.menu):(d.value=a.value,b&&b(d));e.push(d)});return e}return g(a,e||[])}function B(a,b,e){var g=b.toJSON(),d=a.parseStyle(g.style);e?(b.find("#borderColor").value(d["border-color"]||"")[0].fire("change"),b.find("#backgroundColor").value(d["background-color"]||"")[0].fire("change"),b.find("#backgroundImage").value(d["background-image"]||"")[0].fire("change")):(d["border-color"]=g.borderColor,d["background-color"]=
g.backgroundColor,d["background-image"]=g.backgroundImage);b.find("#style").value(a.serializeStyle(a.parseStyle(a.serializeStyle(d))))}function u(a,b,e){e=a.parseStyle(a.getAttrib(e,"style"));e["border-color"]&&(b.borderColor=e["border-color"]);e["background-color"]&&(b.backgroundColor=e["background-color"]);b.backgroundImage=e["background-image"]?e["background-image"]:"url( \u3053\u3053\u306b\u53d6\u5f97\u3057\u305f\u753b\u50cfURL\u3092\u30da\u30fc\u30b9\u30c8 )";b.style=a.serializeStyle(e)}function E(a,
b,e){var g=a.parseStyle(a.getAttrib(b,"style"));t(e,function(a){g[a.name]=a.value});a.setAttrib(b,"style",a.serializeStyle(a.parseStyle(a.serializeStyle(g))))}var q=this;q.tableProps=function(){q.table(!0)};q.table=function(k){function h(){function b(a,c,d){if("TD"===a.tagName||"TH"===a.tagName)g.setStyle(a,c,d);else if(a.children)for(var f=0;f<a.children.length;f++)b(a.children[f],c,d)}var f;B(g,this);n=r.extend(n,this.toJSON());!1===n["class"]&&delete n["class"];a.undoManager.transact(function(){d||
(d=a.plugins.table.insertTable(n.cols||1,n.rows||1));a.dom.setAttribs(d,{style:n.style,"class":n["class"]});if(a.settings.table_style_by_css){if(c=[],c.push({name:"border",value:n.border}),c.push({name:"border-spacing",value:e(n.cellspacing)}),E(g,d,c),g.setAttribs(d,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border}),d.children)for(var h=0;h<d.children.length;h++)b(d.children[h],"border",n.border),b(d.children[h],"padding",e(n.cellpadding))}else a.dom.setAttribs(d,
{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing});g.getAttrib(d,"width")&&!a.settings.table_style_by_css?g.setAttrib(d,"width",l(n.width)):g.setStyle(d,"width",e(n.width));g.setStyle(d,"height",e(n.height));(f=g.select("caption",d)[0])&&!n.caption&&g.remove(f);!f&&n.caption&&(f=g.create("caption"),f.innerHTML=C.ie?"\u00a0":'<br data-mce-bogus="1"/>',d.insertBefore(f,d.firstChild));A(d);n.align&&a.formatter.apply("align"+n.align,{},d);a.focus();a.addVisual()})}function m(b,c){var f=
a.dom.select("td,th",b),d;a:for(var e=0;e<f.length;e++){var h=g.getStyle(f[e],c);"undefined"===typeof d&&(d=h);if(d!=h){d="";break a}}return d}var g=a.dom,d,q,f,v,n={},c;if(!0===k){if(d=g.getParent(a.selection.getStart(),"table"))n={width:l(g.getStyle(d,"width")||g.getAttrib(d,"width")),height:l(g.getStyle(d,"height")||g.getAttrib(d,"height")),cellspacing:l(g.getStyle(d,"border-spacing")||g.getAttrib(d,"cellspacing")),cellpadding:g.getAttrib(d,"data-mce-cell-padding")||g.getAttrib(d,"cellpadding")||
m(d,"padding"),border:g.getAttrib(d,"data-mce-border")||g.getAttrib(d,"border")||m(d,"border"),borderColor:g.getAttrib(d,"data-mce-border-color"),caption:!!g.select("caption",d)[0],"class":g.getAttrib(d,"class")},t(["left","center","right"],function(b){a.formatter.matchNode(d,"align"+b)&&(n.align=b)})}else q={label:"Cols",name:"cols"},f={label:"Rows",name:"rows"};a.settings.table_class_list&&(n["class"]&&(n["class"]=n["class"].replace(/\s*mce\-item\-table\s*/g,"")),v={name:"class",type:"listbox",
label:"Class",values:b(a.settings.table_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"table",classes:[b.value]})})})});k={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==a.settings.table_appearance_options?[q,f,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},
{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[q,f,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},v]};!1!==a.settings.table_advtab?(u(g,n,d),a.windowManager.open({title:"Table properties",data:n,bodyType:"tabpanel",body:[{title:"General",
type:"form",items:k},x(g)],onsubmit:h})):a.windowManager.open({title:"Table properties",data:n,body:k,onsubmit:h})};q.merge=function(b,e){a.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var m=this.toJSON();a.undoManager.transact(function(){b.merge(e,m.cols,m.rows)})}})};q.cell=function(){function k(){B(h,this);g=r.extend(g,this.toJSON());a.undoManager.transact(function(){t(q,
function(b){a.dom.setAttribs(b,{scope:g.scope,style:g.style,"class":g["class"]});a.dom.setStyles(b,{width:e(g.width),height:e(g.height)});g.type&&b.nodeName.toLowerCase()!=g.type&&(b=h.rename(b,g.type));A(b);g.align&&a.formatter.apply("align"+g.align,{},b);w(b);g.valign&&a.formatter.apply("valign"+g.valign,{},b)});a.focus()})}var h=a.dom,m,g,d,q=[],q=a.dom.select("td[data-mce-selected],th[data-mce-selected]");m=a.dom.getParent(a.selection.getStart(),"td,th");!q.length&&m&&q.push(m);if(m=m||q[0])g=
{width:l(h.getStyle(m,"width")||h.getAttrib(m,"width")),height:l(h.getStyle(m,"height")||h.getAttrib(m,"height")),scope:h.getAttrib(m,"scope"),"class":h.getAttrib(m,"class")},g.type=m.nodeName.toLowerCase(),t(["left","center","right"],function(b){a.formatter.matchNode(m,"align"+b)&&(g.align=b)}),t(["top","middle","bottom"],function(b){a.formatter.matchNode(m,"valign"+b)&&(g.valign=b)}),a.settings.table_cell_class_list&&(d={name:"class",type:"listbox",label:"Class",values:b(a.settings.table_cell_class_list,
function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"td",classes:[b.value]})})})}),d={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",
value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",
text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},d]},!1!==a.settings.table_cell_advtab?(u(h,g,m),a.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:d},x(h)],onsubmit:k})):a.windowManager.open({title:"Cell properties",data:g,body:d,onsubmit:k})};q.row=function(){function k(){var b,c,d;B(h,this);f=r.extend(f,this.toJSON());a.undoManager.transact(function(){var g=
f.type;t(v,function(k){a.dom.setAttribs(k,{scope:f.scope,style:f.style,"class":f["class"]});a.dom.setStyles(k,{height:e(f.height)});g!=k.parentNode.nodeName.toLowerCase()&&(b=h.getParent(k,"table"),c=k.parentNode,d=h.select(g,b)[0],d||(d=h.create(g),b.firstChild?b.insertBefore(d,b.firstChild):b.appendChild(d)),d.appendChild(k),c.hasChildNodes()||h.remove(c));A(k);f.align&&a.formatter.apply("align"+f.align,{},k)});a.focus()})}var h=a.dom,m,g,d,q,f,v=[];m=a.dom.getParent(a.selection.getStart(),"table");
g=a.dom.getParent(a.selection.getStart(),"td,th");t(m.rows,function(a){t(a.cells,function(b){if(h.getAttrib(b,"data-mce-selected")||b==g)return v.push(a),!1})});if(d=v[0])f={height:l(h.getStyle(d,"height")||h.getAttrib(d,"height")),scope:h.getAttrib(d,"scope"),"class":h.getAttrib(d,"class")},f.type=d.parentNode.nodeName.toLowerCase(),t(["left","center","right"],function(b){a.formatter.matchNode(d,"align"+b)&&(f.align=b)}),a.settings.table_row_class_list&&(q={name:"class",type:"listbox",label:"Class",
values:b(a.settings.table_row_class_list,function(b){b.value&&(b.textStyle=function(){return a.formatter.getCssText({block:"tr",classes:[b.value]})})})}),m={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",
value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},q]},!1!==a.settings.table_row_advtab?(u(h,f,d),a.windowManager.open({title:"Row properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},x(h)],onsubmit:k})):a.windowManager.open({title:"Row properties",data:f,body:m,onsubmit:k})}}});K("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(r,C){var t;return function(a){function v(b,c){return{index:b,
y:a.dom.getPos(c).y}}function x(b,c){return{index:b,y:a.dom.getPos(c).y+c.offsetHeight}}function l(b,c){return{index:b,x:a.dom.getPos(c).x+c.offsetWidth}}function e(){return"rtl"===a.getBody().dir}function A(){return a.inline}function w(){return A?a.getBody().ownerDocument.body:a.getBody()}function b(b,c){return e()?l(b,c):{index:b,x:a.dom.getPos(c).x}}function B(b,c){return e()?{index:b,x:a.dom.getPos(c).x}:l(b,c)}function u(b,c){var d=a.dom.getStyle(b,c,!0);return parseInt(d,10)}function E(a){var b=
u(a,"width");a=u(a.parentElement,"width");return b/a*100}function q(a,b){var c=u(a,"width");return b/c*100}function k(a,b){var c=u(a.parentElement,"width");return b/c*100}function h(a,b,c){for(var d=[],e=1;e<c.length;e++)d.push(a(e-1,c[e].element));d.push(b(c.length-1,c[c.length-1].element));return d}function m(){var b=a.dom.select(".mce-resize-bar",w());r.each(b,function(b){a.dom.remove(b)})}function g(a,b,c,d,e,f,h,g){a={"data-mce-bogus":"all","class":"mce-resize-bar "+a,unselectable:"on","data-mce-resize":!1,
style:"cursor: "+b+"; margin: 0; padding: 0; position: absolute; left: "+c+"px; top: "+d+"px; height: "+e+"px; width: "+f+"px; "};a[h]=g;return a}function d(b,c,d){r.each(b,function(b){var e=d.x,M=b.y-2;a.dom.add(w(),"div",g("mce-resize-bar-row","row-resize",e,M,4,c,"data-row",b.index))})}function S(b,c,d){r.each(b,function(b){var e=b.x-2,M=d.y;a.dom.add(w(),"div",g("mce-resize-bar-col","col-resize",e,M,c,4,"data-col",b.index))})}function f(a){return r.map(a.rows,function(a){var b=r.map(a.cells,function(a){var b=
a.hasAttribute("rowspan")?parseInt(a.getAttribute("rowspan"),10):1,c=a.hasAttribute("colspan")?parseInt(a.getAttribute("colspan"),10):1;return{element:a,rowspan:b,colspan:c}});return{element:a,cells:b}})}function F(a){var b={},c=[],d=0,e=0;r.each(a,function(a,M){var f=[];r.each(a.cells,function(a){for(var c=0;b[M+","+c]!==L;)c++;for(var h={element:a.element,colspan:a.colspan,rowspan:a.rowspan,rowIndex:M,colIndex:c},g=0;g<a.colspan;g++)for(var k=0;k<a.rowspan;k++){var p=M+k,m=c+g;b[p+","+m]=h;d=Math.max(d,
p+1);e=Math.max(e,m+1)}f.push(h)});c.push({element:a.element,cells:f})});return{grid:{maxRows:d,maxCols:e},getAt:function(a,c){return b[a+","+c]},getAllCells:function(){var a=[];r.each(c,function(b){a=a.concat(b.cells)});return a},getAllRows:function(){return c}}}function n(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c}function c(a,b,c){a=a();for(var d,e=0;e<a.length;e++)b(a[e])&&(d=a[e]);return d?d:c()}function p(a){var b=n(0,a.grid.maxCols),d=n(0,a.grid.maxRows);return r.map(b,function(b){return c(function(){for(var c=
[],e=0;e<d.length;e++){var f=a.getAt(e,b);f&&f.colIndex===b&&c.push(f)}return c},function(a){return 1===a.colspan},function(){for(var c,e=0;e<d.length;e++)if(c=a.getAt(e,b))return c;return null})})}function D(a){var b=n(0,a.grid.maxCols),d=n(0,a.grid.maxRows);return r.map(d,function(d){return c(function(){for(var c=[],e=0;e<b.length;e++){var f=a.getAt(d,e);f&&f.rowIndex===d&&c.push(f)}return c},function(a){return 1===a.rowspan},function(){return a.getAt(d,0)})})}function z(c){var e=f(c),e=F(e),g=
D(e),k=p(e),e=a.dom.getPos(c),g=0<g.length?h(v,x,g):[],k=0<k.length?h(b,B,k):[];d(g,c.offsetWidth,e);S(k,c.offsetHeight,e)}function G(a,b,c,d){if(0>b||b>=a.length-1)return"";var e=a[b];if(e)e={value:e,delta:0};else for(var f=a.slice(0,b).reverse(),g=0;g<f.length;g++)f[g]&&(e={value:f[g],delta:g+1});if(f=a[b+1])f={value:f,delta:1};else for(a=a.slice(b+1),b=0;b<a.length;b++)a[b]&&(f={value:a[b],delta:b+1});e=Math.abs(f.value-e.value)/(f.delta-e.delta);return c?e/u(d,"width")*100:e}function J(b,c){var d=
a.dom.getStyle(b,c);d||(d=a.dom.getAttrib(b,c));d||(d=a.dom.getStyle(b,c,!0));return d}function y(a,b,c){var d=J(a,"width"),e=parseInt(d,10);a=b?u(a,"width")/u(c,"width")*100:u(a,"width");if(b&&!R(d)||!b&&!aa(d))e=0;return!isNaN(e)&&0<e?e:a}function I(a,c,d){a=p(a);for(var e=r.map(a,function(a){return b(a.colIndex,a.element).x}),f=[],g=0;g<a.length;g++){var h=1<(a[g].element.hasAttribute("colspan")?parseInt(a[g].element.getAttribute("colspan"),10):1)?G(e,g):y(a[g].element,c,d),h=h?h:10;f.push(h)}return f}
function ha(a){var b=J(a,"height"),c=parseInt(b,10);R(b)&&(c=0);return!isNaN(c)&&0<c?c:u(a,"height")}function K(a){a=D(a);for(var b=r.map(a,function(a){return v(a.rowIndex,a.element).y}),c=[],d=0;d<a.length;d++){var e=1<(a[d].element.hasAttribute("rowspan")?parseInt(a[d].element.getAttribute("rowspan"),10):1)?G(b,d):ha(a[d].element),e=e?e:10;c.push(e)}return c}function Q(a,b,c,d,e){function f(a){return r.map(a,function(){return 0})}function g(a,b){var e=f(k.slice(0,a)),h=f(k.slice(b+1));if(0<=c)e=
e.concat([c,Math.max(d,k[b]-c)-k[b]]).concat(h);else var p=Math.max(d,k[a]+c),e=e.concat([p-k[a],k[a]-p]).concat(h);return e}function h(a,b){var e=f(k.slice(0,b));return 0<=c?e.concat([c]):e.concat([Math.max(d,k[b]+c)-k[b]])}var k=a.slice(0);return 0===a.length?[]:1===a.length?e?[100-k[0]]:[Math.max(d,k[0]+c)-k[0]]:0===b?g(0,1):0<b&&b<a.length-1?g(b,b+1):b===a.length-1?h(b-1,b):[]}function W(a,b,c){for(var d=0;a<b;a++)d+=c[a];return d}function X(a,b){var c=a.getAllCells();return r.map(c,function(a){var c=
W(a.colIndex,a.colIndex+a.colspan,b);return{element:a.element,width:c,colspan:a.colspan}})}function Y(a,b){var c=a.getAllCells();return r.map(c,function(a){var c=W(a.rowIndex,a.rowIndex+a.rowspan,b);return{element:a.element,height:c,rowspan:a.rowspan}})}function Z(a,b){var c=a.getAllRows();return r.map(c,function(a,c){return{element:a.element,height:b[c]}})}function R(a){return ia.test(a)}function aa(a){return ja.test(a)}function ba(b,c,d){function e(b,c){r.each(b,function(b){a.dom.setStyle(b.element,
"width",b.width+c);a.dom.setAttrib(b.element,"width",null)})}for(var g=f(b),h=F(g),p=R(b.width)||R(b.style.width),g=I(h,p,b),m=p?q(b,c):c,m=Q(g,d,m,10,p,b),n=[],l=0;l<m.length;l++)n.push(m[l]+g[l]);var D=X(h,n),B=p?"%":"px",t=p?d<h.grid.maxCols-1?E(b):E(b)+k(b,c):d<h.grid.maxCols-1?u(b,"width"):u(b,"width")+c;a.undoManager.transact(function(){e(D,B);d!=h.grid.maxCols-1&&p||(a.dom.setStyle(b,"width",t+B),a.dom.setAttrib(b,"width",null))})}function ca(b,c,d){for(var e=f(b),e=F(e),g=K(e),h=[],k=0,p=
0;p<g.length;p++)h.push(p===d?c+g[p]:g[p]),k+=k[p];var m=Y(e,h),n=Z(e,h);a.undoManager.transact(function(){r.each(n,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});r.each(m,function(b){a.dom.setStyle(b.element,"height",b.height+"px");a.dom.setAttrib(b.element,"height",null)});a.dom.setStyle(b,"height",k+"px");a.dom.setAttrib(b,"height",null)})}function U(){da=setTimeout(function(){ea()},200)}function V(b,c){a.dom.bind(b,"mouseup",function(){ea()});
a.dom.bind(b,"mousemove",function(a){clearTimeout(da);T&&c(a)});a.dom.bind(b,"mouseout",function(){U()})}function ea(){a.dom.remove(N);if(T){a.dom.removeClass(H,"mce-resize-bar-dragging");T=!1;var b,c;if(a.dom.hasClass(H,"mce-resize-bar-col")){c=parseInt(a.dom.getAttrib(H,"data-initial-left"),10);var d=a.dom.getPos(H).x;b=parseInt(a.dom.getAttrib(H,"data-col"),10);c=e()?c-d:d-c;ba(t,c,b)}else a.dom.hasClass(H,"mce-resize-bar-row")&&(c=parseInt(a.dom.getAttrib(H,"data-initial-top"),10),d=a.dom.getPos(H).y,
b=parseInt(a.dom.getAttrib(H,"data-row"),10),ca(t,d-c,b));b=t;m();z(b);a.nodeChanged()}}function fa(b,c){var d;N?d=N:(d=document.createElement("div"),d.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),d.setAttribute("data-mce-bogus","all"));N=d;T=!0;a.dom.addClass(b,"mce-resize-bar-dragging");H=b;V(N,c);a.dom.add(w(),N)}function ka(b){O=O!==L?O:b.clientX;var c=b.clientX-O;O=b.clientX;b=a.dom.getPos(H).x;a.dom.setStyle(H,"left",b+c+"px")}
function la(b){P=P!==L?P:b.clientY;var c=b.clientY-P;P=b.clientY;b=a.dom.getPos(H).y;a.dom.setStyle(H,"top",b+c+"px")}function ga(b){var c=b.target,d=a.getBody();if(a.$.contains(d,t)||t===d)a.dom.hasClass(c,"mce-resize-bar-col")?(b.preventDefault(),b=a.dom.getPos(c).x,a.dom.setAttrib(c,"data-initial-left",b),O=L,fa(c,ka)):a.dom.hasClass(c,"mce-resize-bar-row")&&(b.preventDefault(),b=a.dom.getPos(c).y,a.dom.setAttrib(c,"data-initial-top",b),P=L,fa(c,la))}var ia=new RegExp(/(\d+(\.\d+)?%)/),ja=new RegExp(/px|em/),
da,T,N,H,O,P;a.on("init",function(){a.dom.bind(w(),"mousedown",ga)});a.on("ObjectResized",function(b){b=b.target;if("TABLE"===b.nodeName){var c=[];r.each(b.rows,function(b){r.each(b.cells,function(b){var d=a.dom.getStyle(b,"width",!0);c.push({cell:b,width:d})})});r.each(c,function(b){a.dom.setStyle(b.cell,"width",b.width);a.dom.setAttrib(b.cell,"width",null)})}});a.on("mouseover",function(b){if(!T){var c=a.dom.getParent(b.target,"table");if("TABLE"===b.target.nodeName||c)t=c,m(),z(c)}});a.on("keydown",
function(a){switch(a.keyCode){case C.LEFT:case C.RIGHT:case C.UP:case C.DOWN:m()}});a.on("remove",function(){m();a.dom.unbind(w(),"mousedown",ga)});return{adjustWidth:ba,adjustHeight:ca,clearBars:m,drawBars:z,determineDeltas:Q,getTableGrid:F,getTableDetails:f,getWidths:I,getPixelHeights:K,isPercentageBasedSize:R,isPixelBasedSize:aa,recalculateWidths:X,recalculateCellHeights:Y,recalculateRowHeights:Z}}});K("tinymce/tableplugin/Plugin","tinymce/tableplugin/TableGrid tinymce/tableplugin/Quirks tinymce/tableplugin/CellSelection tinymce/tableplugin/Dialogs tinymce/tableplugin/ResizeBars tinymce/util/Tools tinymce/dom/TreeWalker tinymce/Env tinymce/PluginManager".split(" "),
function(r,C,t,a,v,x,l,e,A){var w=x.each;A.add("table",function(b){function l(a){return function(){b.execCommand(a)}}function u(a,d){var f,g,h,k;h='<table id="__mce"><tbody>';for(f=0;f<d;f++){h+="<tr>";for(g=0;g<a;g++)h+="<td>"+(e.ie&&10>e.ie?"&nbsp;":"<br>")+"</td>";h+="</tr>"}h+="</tbody></table>";b.undoManager.transact(function(){b.insertContent(h);k=b.dom.get("__mce");b.dom.setAttrib(k,"id",null);b.$("tr",k).each(function(a,c){b.fire("newrow",{node:c});b.$("th,td",c).each(function(a,c){b.fire("newcell",
{node:c})})});b.dom.setAttribs(k,b.settings.table_default_attributes||{});b.dom.setStyles(k,b.settings.table_default_styles||{})});return k}function x(a,d,e){function f(){var g,h,k={},l=0;h=b.dom.select("td[data-mce-selected],th[data-mce-selected]");(g=h[0])||(g=b.selection.getStart());e&&0<h.length?(w(h,function(a){return k[a.parentNode.parentNode.nodeName]=1}),w(k,function(a){l+=a}),g=1!==l):g=!b.dom.getParent(g,d);a.disabled(g);b.selection.selectorChanged(d,function(b){a.disabled(!b)})}if(b.initialized)f();
else b.on("init",f)}function q(){x(this,"table")}function k(){x(this,"td,th")}function h(){var a;a='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var b=0;10>b;b++){a+="<tr>";for(var d=0;10>d;d++)a+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*b+d)+'" href="#" data-mce-x="'+d+'" data-mce-y="'+b+'"></a></td>';a+="</tr>"}return a+'</table><div class="mce-text-center" role="presentation">1 x 1</div>'}function m(a,d,e){var f=e.getEl().getElementsByTagName("table")[0],
g,h,k,l,m=e.isRtl()||"tl-tr"==e.parent().rel;f.nextSibling.innerHTML=a+1+" x "+(d+1);m&&(a=9-a);for(g=0;10>g;g++)for(e=0;10>e;e++)k=f.rows[g].childNodes[e].firstChild,l=(m?e>=a:e<=a)&&g<=d,b.dom.toggleClass(k,"mce-active",l),l&&(h=k);return h.parentNode}function g(a){return b.dom.is(a,"table")&&b.getBody().contains(a)}var d,A=this,f=new a(b),F;!b.settings.object_resizing||!1===b.settings.table_resize_bars||!0!==b.settings.object_resizing&&"table"!==b.settings.object_resizing||(F=v(b));!1===b.settings.table_grid?
b.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:f.table}):b.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(a){a.aria&&(this.parent().hideAll(),a.stopImmediatePropagation(),f.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var a=this.menu.items()[0].getEl().getElementsByTagName("a");b.dom.removeClass(a,"mce-active");b.dom.addClass(a[0],"mce-active")},menu:[{type:"container",
html:h(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(a){var b=a.target,d;if("A"==b.tagName.toUpperCase()){d=parseInt(b.getAttribute("data-mce-x"),10);b=parseInt(b.getAttribute("data-mce-y"),10);if(this.isRtl()||"tl-tr"==this.parent().rel)d=9-d;if(d!==this.lastX||b!==this.lastY)m(d,b,a.control),this.lastX=d,this.lastY=b}},onclick:function(a){var d=this;"A"==a.target.tagName.toUpperCase()&&(a.preventDefault(),a.stopPropagation(),d.parent().cancel(),b.undoManager.transact(function(){u(d.lastX+
1,d.lastY+1)}),b.addVisual())}}]});b.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:q,onclick:f.tableProps});b.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:q,cmd:"mceTableDelete"});b.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:l("mceTableCellProps"),onPostRender:k},{text:"Merge cells",onclick:l("mceTableMergeCells"),onPostRender:function(){x(this,"td,th",!0)}},{text:"Split cell",
onclick:l("mceTableSplitCells"),onPostRender:k}]});b.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:l("mceTableInsertRowBefore"),onPostRender:k},{text:"Insert row after",onclick:l("mceTableInsertRowAfter"),onPostRender:k},{text:"Delete row",onclick:l("mceTableDeleteRow"),onPostRender:k},{text:"Row properties",onclick:l("mceTableRowProps"),onPostRender:k},{text:"-"},{text:"Cut row",onclick:l("mceTableCutRow"),onPostRender:k},{text:"Copy row",onclick:l("mceTableCopyRow"),
onPostRender:k},{text:"Paste row before",onclick:l("mceTablePasteRowBefore"),onPostRender:k},{text:"Paste row after",onclick:l("mceTablePasteRowAfter"),onPostRender:k}]});b.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:l("mceTableInsertColBefore"),onPostRender:k},{text:"Insert column after",onclick:l("mceTableInsertColAfter"),onPostRender:k},{text:"Delete column",onclick:l("mceTableDeleteCol"),onPostRender:k}]});var n=[];w("inserttable tableprops deletetable | cell row column".split(" "),
function(a){"|"==a?n.push({text:"-"}):n.push(b.menuItems[a])});b.addButton("table",{type:"menubutton",title:"Table",menu:n});if(!e.isIE)b.on("click",function(a){a=a.target;"TABLE"===a.nodeName&&(b.selection.select(a),b.nodeChanged())});A.quirks=new C(b);b.on("Init",function(){A.cellSelection=new t(b);A.resizeBars=F});b.on("PreInit",function(){b.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)})});w({mceTableSplitCells:function(a){a.split()},
mceTableMergeCells:function(a){var d;d=b.dom.getParent(b.selection.getStart(),"th,td");b.dom.select("td[data-mce-selected],th[data-mce-selected]").length?a.merge():f.merge(a,d)},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){d=
a.cutRows()},mceTableCopyRow:function(a){d=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(d,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(d)},mceTableDelete:function(a){F&&F.clearBars();a.deleteTable()}},function(a,d){b.addCommand(d,function(){var d=new r(b);a(d);b.execCommand("mceRepaint");A.cellSelection.clear()})});w({mceInsertTable:f.table,mceTableProps:function(){f.table(!0)},mceTableRowProps:f.row,mceTableCellProps:f.cell},function(a,d){b.addCommand(d,function(b,d){a(d)})});
b.addButton("tableprops",{title:"Table properties",onclick:f.tableProps,icon:"table"});b.addButton("tabledelete",{title:"Delete table",onclick:l("mceTableDelete")});b.addButton("tablecellprops",{title:"Cell properties",onclick:l("mceTableCellProps")});b.addButton("tablemergecells",{title:"Merge cells",onclick:l("mceTableMergeCells")});b.addButton("tablesplitcells",{title:"Split cell",onclick:l("mceTableSplitCells")});b.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:l("mceTableInsertRowBefore")});
b.addButton("tableinsertrowafter",{title:"Insert row after",onclick:l("mceTableInsertRowAfter")});b.addButton("tabledeleterow",{title:"Delete row",onclick:l("mceTableDeleteRow")});b.addButton("tablerowprops",{title:"Row properties",onclick:l("mceTableRowProps")});b.addButton("tablecutrow",{title:"Cut row",onclick:l("mceTableCutRow")});b.addButton("tablecopyrow",{title:"Copy row",onclick:l("mceTableCopyRow")});b.addButton("tablepasterowbefore",{title:"Paste row before",onclick:l("mceTablePasteRowBefore")});
b.addButton("tablepasterowafter",{title:"Paste row after",onclick:l("mceTablePasteRowAfter")});b.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:l("mceTableInsertColBefore")});b.addButton("tableinsertcolafter",{title:"Insert column after",onclick:l("mceTableInsertColAfter")});b.addButton("tabledeletecol",{title:"Delete column",onclick:l("mceTableDeleteCol")});(function(){var a=b.settings.table_toolbar;""!==a&&!1!==a&&(a||(a="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),
b.addContextToolbar(g,a))})();if(!1!==b.settings.table_tab_navigation)b.on("keydown",function(a){var d,e,f;9==a.keyCode&&(d=b.dom.getParent(b.selection.getStart(),"th,td"))&&(a.preventDefault(),e=new r(b),f=a.shiftKey?-1:1,b.undoManager.transact(function(){!e.moveRelIdx(d,f)&&0<f&&(e.insertRow(),e.refresh(),e.moveRelIdx(d,f))}))});A.insertTable=u})})})(this);